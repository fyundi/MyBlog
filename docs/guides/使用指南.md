# 博客系统使用指南

## 📋 目录

1. [快速开始](#快速开始)
2. [日常使用](#日常使用)
3. [创建文章](#创建文章)
4. [导出文章](#导出文章)
5. [部署到线上](#部署到线上)
6. [常见问题](#常见问题)

---

## 🚀 快速开始

### 第一步：检查环境

运行环境检查脚本：

```bash
./scripts/check-env.sh
```

确保已安装：
- ✅ Node.js v18.0.0 或更高版本
- ✅ npm v9.0.0 或更高版本
- ✅ Git 最新版本

如果没有安装，请访问：
- Node.js: https://nodejs.org/
- Git: https://git-scm.com/

### 第二步：安装依赖

```bash
npm install
```

**注意**：如果遇到权限错误，可以尝试：
```bash
# 使用 nvm 管理 Node.js（推荐）
# 或检查 npm 配置
npm config get prefix
```

### 第三步：启动开发服务器

```bash
npm run dev
```

打开浏览器访问：**http://localhost:3000**

你应该能看到博客首页，包含：
- 分类展示（Unity、Cocos、杂记）
- 最新文章列表
- 导航栏（文章、分类、标签、搜索）

---

## 📝 日常使用

### 查看博客

1. **首页** (`/`): 显示分类和最新文章
2. **所有文章** (`/posts`): 查看所有文章列表
3. **分类页面** (`/categories`): 浏览所有分类
4. **标签页面** (`/tags`): 浏览所有标签
5. **搜索页面** (`/search`): 搜索文章

### 本地预览

在开发模式下，修改任何文件后，Next.js 会自动重新加载页面，你可以立即看到更改。

---

## ✍️ 创建文章

### 方法一：使用脚本（推荐）

```bash
./scripts/create-post.sh "文章标题" 分类
```

**示例**：
```bash
# 创建 Unity 分类的文章
./scripts/create-post.sh "Unity 性能优化技巧" unity

# 创建 Cocos 分类的文章
./scripts/create-post.sh "Cocos Creator 动画系统" cocos

# 创建杂记分类的文章（默认）
./scripts/create-post.sh "今天的学习笔记"
```

脚本会自动：
- ✅ 生成文件名（基于标题）
- ✅ 添加当前日期
- ✅ 创建 Frontmatter 模板
- ✅ 保存到正确的分类目录

### 方法二：手动创建

1. 在 `content/posts/` 下选择分类目录：
   - `unity/` - Unity 开发
   - `cocos/` - Cocos 开发
   - `notes/` - 个人杂记

2. 创建 `.mdx` 文件，例如：`content/posts/unity/my-article.mdx`

3. 添加 Frontmatter 和内容：

```markdown
---
title: "文章标题"
date: "2024-01-15"
category: "unity"
tags: ["Unity", "C#", "游戏开发"]
description: "文章描述，用于 SEO 和列表展示"
featured: false
---

# 文章标题

这里是文章内容...

## 章节标题

更多内容...
```

### Frontmatter 说明

| 字段 | 类型 | 必填 | 说明 |
|------|------|------|------|
| `title` | string | ✅ | 文章标题 |
| `date` | string | ✅ | 发布日期（格式：YYYY-MM-DD） |
| `category` | string | ✅ | 分类（unity/cocos/notes） |
| `tags` | array | ✅ | 标签数组 |
| `description` | string | ✅ | 文章描述 |
| `featured` | boolean | ❌ | 是否置顶（默认 false） |

### 文章内容格式

支持标准 Markdown 语法：

```markdown
# 一级标题
## 二级标题
### 三级标题

**粗体文本**
*斜体文本*

- 列表项 1
- 列表项 2

1. 有序列表
2. 第二项

> 引用文本

`行内代码`

```代码块
function example() {
  return "Hello";
}
```

[链接文本](https://example.com)

![图片描述](图片URL)
```

---

## 📤 导出文章

### 单篇导出

在浏览器中访问：

```
http://localhost:3000/export?slug=分类/文章名
```

**示例**：
```
http://localhost:3000/export?slug=unity/unity-basics
```

这会下载一个 `.md` 文件，包含纯 Markdown 内容（已去除 Frontmatter）。

### 批量导出

访问：

```
http://localhost:3000/export?all=true
```

这会下载一个 ZIP 压缩包，包含所有文章，按分类组织。

### 使用脚本导出

```bash
./scripts/export-all.sh
```

导出的文件会保存在 `exports/` 目录下。

### 发布到国内平台

1. **导出文章**：使用上述方法导出 Markdown
2. **复制内容**：打开导出的 `.md` 文件，复制内容
3. **粘贴到平台**：
   - 掘金：直接粘贴到编辑器
   - CSDN：直接粘贴到编辑器
   - 博客园：直接粘贴到编辑器
   - 简书：直接粘贴到编辑器
4. **上传图片**：如有图片，需要单独上传到图床或平台

---

## 🌐 部署到线上

### 部署到 Vercel（推荐，免费）

#### 步骤 1: 准备 GitHub 仓库

```bash
# 初始化 Git（如果还没有）
git init

# 添加所有文件
git add .

# 提交
git commit -m "Initial commit: 博客系统"

# 在 GitHub 创建新仓库后，添加远程仓库
git remote add origin https://github.com/你的用户名/MyBlog.git

# 推送代码
git push -u origin main
```

#### 步骤 2: 连接 Vercel

1. 访问 https://vercel.com
2. 使用 GitHub 账号登录
3. 点击 **"New Project"**
4. 选择你的 GitHub 仓库（MyBlog）
5. Vercel 会自动检测 Next.js 项目
6. 点击 **"Deploy"**

部署完成后，你会获得一个 URL，例如：`https://my-blog.vercel.app`

#### 步骤 3: 更新配置

部署后，需要更新以下文件中的 URL：

1. **`app/sitemap.ts`**: 将 `baseUrl` 改为你的 Vercel URL
2. **`app/robots.ts`**: 将 sitemap URL 改为你的 Vercel URL

### 部署到 Netlify（备选）

1. 访问 https://app.netlify.com
2. 使用 GitHub 登录
3. 点击 **"New site from Git"**
4. 选择仓库并部署

### 部署到 GitHub Pages

需要配置静态导出，详见 `项目计划书.md`。

---

## 🔧 常用命令

### 开发

```bash
# 启动开发服务器
npm run dev

# 构建生产版本
npm run build

# 启动生产服务器（本地测试）
npm start

# 代码检查
npm run lint
```

### 文章管理

```bash
# 创建新文章
./scripts/create-post.sh "标题" 分类

# 批量导出
./scripts/export-all.sh

# 检查环境
./scripts/check-env.sh
```

---

## ❓ 常见问题

### Q1: npm install 失败

**问题**：权限错误或网络问题

**解决方案**：
```bash
# 检查 Node.js 版本
node --version  # 需要 v18+

# 使用国内镜像（如果网络慢）
npm config set registry https://registry.npmmirror.com

# 清除缓存
npm cache clean --force
```

### Q2: 文章不显示

**检查**：
1. 文件是否在 `content/posts/` 目录下
2. 文件扩展名是否为 `.mdx`
3. Frontmatter 格式是否正确
4. 重启开发服务器：`npm run dev`

### Q3: 搜索功能不工作

搜索功能在客户端运行，确保：
1. 浏览器支持 JavaScript
2. 文章已正确加载
3. 检查浏览器控制台是否有错误

### Q4: 代码高亮不显示

当前使用简化的 Markdown 渲染。如需完整代码高亮，需要：
1. 配置完整的 MDX 处理
2. 或使用 `next-mdx-remote` 等库

### Q5: 部署后样式丢失

确保：
1. Tailwind CSS 已正确构建
2. 检查 `next.config.js` 配置
3. 重新构建：`npm run build`

### Q6: 如何添加新分类

1. 在 `lib/categories.ts` 的 `CATEGORIES` 对象中添加新分类
2. 在 `content/posts/` 下创建对应的目录
3. 重启开发服务器

### Q7: 如何配置 Google AdSense

1. 申请 AdSense 账号
2. 获取广告 ID
3. 在 `.env.local` 中添加：
   ```
   NEXT_PUBLIC_ADSENSE_ID=你的广告ID
   ```
4. 在需要显示广告的页面使用 `<AdSense />` 组件

---

## 📚 更多资源

- **项目计划书**: `项目计划书.md` - 详细的技术文档
- **实施总结**: `实施总结.md` - 已完成功能列表
- **Next.js 文档**: https://nextjs.org/docs
- **Markdown 语法**: https://www.markdownguide.org/

---

## 💡 使用技巧

### 1. 文章组织建议

- 使用清晰的标题层级（H1 → H2 → H3）
- 添加代码示例时使用代码块
- 使用标签帮助文章分类
- 定期更新文章日期

### 2. SEO 优化

- 填写完整的 `description`
- 使用相关的 `tags`
- 保持文章结构清晰
- 定期更新内容

### 3. 性能优化

- 图片使用外部图床（如 GitHub、七牛云）
- 避免文章过长（建议 3000-5000 字）
- 定期清理未使用的文件

---

## 🎉 开始使用

现在你已经了解了如何使用这个博客系统！

**下一步**：
1. ✅ 运行 `npm install` 安装依赖
2. ✅ 运行 `npm run dev` 启动开发服务器
3. ✅ 使用脚本创建第一篇文章
4. ✅ 在浏览器中查看效果
5. ✅ 部署到 Vercel 让全世界看到你的博客

祝你写作愉快！📝✨
